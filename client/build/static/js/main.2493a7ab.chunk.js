(this.webpackJsonpchess_client=this.webpackJsonpchess_client||[]).push([[0],{110:function(n,t,e){"use strict";e.r(t);var o=e(1),c=e(0),r=e.n(c),i=e(59),a=e.n(i),l=(e(74),e(3)),u=e(2),s=e(27),h=e(4),b=e(38),d=e.n(b),f=e(60);function p(){var n=Object(l.a)(["\n    height: 300px;\n    width: 300px;\n    animation: bubble 1s forwards;\n    animation-name: slides;\n    animation-duration: 2s;\n"]);return p=function(){return n},n}function m(){var n=Object(l.a)(["\n    width: 200px;\n    height: 50px;\n    background-color: ",";\n    color: white;\n    font-size: 18px;\n    font-weight: bold;\n    border: 1px solid black;\n    border-radius: 3px;\n    cursor: pointer;\n    font-family: ",";\n"]);return m=function(){return n},n}function j(){var n=Object(l.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: space-between;\n    height: 450px;\n"]);return j=function(){return n},n}function w(){var n=Object(h.f)(),t=r.a.useCallback(Object(f.a)(d.a.mark((function t(){var e,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/create-room",{method:"POST"});case 2:return e=t.sent,t.next=5,e.json();case 5:o=t.sent,n.push("/game/".concat(o.gameId)),window.sessionStorage.setItem(o.gameId,"white");case 8:case"end":return t.stop()}}),t)}))),[n]);return Object(o.jsxs)(y,{children:[Object(o.jsx)(k,{src:"../chess_icons/chess_home.svg",alt:"home"}),Object(o.jsx)(O,{onClick:t,children:"Create Game"})]})}var g,v,x,y=u.b.div(j()),O=u.b.button(m(),(function(n){return n.theme.color.primary}),(function(n){return n.theme.fontFamily})),k=u.b.img(p()),_=e(15);!function(n){n.white="white",n.black="black"}(g||(g={})),function(n){n.King="king",n.Rook="rook",n.Bishop="bishop",n.Queen="queen",n.Knight="knight",n.Pawn="pawn"}(v||(v={})),function(n){n[n.attacking=0]="attacking",n[n.advancing=1]="advancing"}(x||(x={}));var C=[{empty:!0},{empty:!0},{empty:!0},{empty:!0},{empty:!0},{empty:!0},{empty:!0},{empty:!0}],S=(v.Rook,g.black,v.Knight,g.black,v.Bishop,g.black,v.Queen,g.black,v.King,g.black,v.Bishop,g.black,v.Knight,g.black,v.Rook,g.black,v.Pawn,g.black,v.Pawn,g.black,v.Pawn,g.black,v.Pawn,g.black,v.Pawn,g.black,v.Pawn,g.black,v.Pawn,g.black,v.Pawn,g.black,[].concat(C),[].concat(C),[].concat(C),[].concat(C),v.Pawn,g.white,v.Pawn,g.white,v.Pawn,g.white,v.Pawn,g.white,v.Pawn,g.white,v.Pawn,g.white,v.Pawn,g.white,v.Pawn,g.white,v.Rook,g.white,v.Knight,g.white,v.Bishop,g.white,v.Queen,g.white,v.King,g.white,v.Bishop,g.white,v.Knight,g.white,v.Rook,g.white,g.white,e(64)),P=e.n(S),A=e(29),E=e(30),I=e(65),F=e(66),B=e(67),K=e(42);function z(n,t){if(!n.activeCoordinates)return[];var e=n.activeCoordinates,o=e.row,c=e.column,r=n.boardState[o][c];if(r.empty)return[];var i=function(n,t,e,o){for(var c=new R(e,o),r=new R(e,o),i=new R(e,o),a=new R(e,o),l=new R(e,o),u=new R(e,o),s=new R(e,o),h=new R(e,o),b=1;b<8;b++)c.push_cell_to_axis({row:n-b,column:t-b}),r.push_cell_to_axis({row:n-b,column:t+b}),i.push_cell_to_axis({row:n+b,column:t+b}),a.push_cell_to_axis({row:n+b,column:t-b}),l.push_cell_to_axis({row:n,column:t-b}),u.push_cell_to_axis({row:n-b,column:t}),s.push_cell_to_axis({row:n,column:t+b}),h.push_cell_to_axis({row:n+b,column:t});return{diagonal:Object(K.a)(c.concat(r).concat(a).concat(i)),orthogonal:Object(K.a)(l.concat(u).concat(s).concat(h)),diagonal_1:[c[0],r[0],a[0],i[0]],orthogonal_1:[l[0],u[0],s[0],h[0]]}}(o,c,n,t);if(r.piece===v.Queen)return i.diagonal.concat(i.orthogonal);if(r.piece===v.Bishop)return i.diagonal;if(r.piece===v.Rook)return i.orthogonal;if(r.piece===v.King)return i.diagonal_1.concat(i.orthogonal_1);var a=new R(n,t);if(r.piece===v.Pawn){var l=1===o||6===o;r.color===g.black&&(a.push_cell({row:o+1,column:c},x.advancing),l&&0!==a.length&&a.push_cell({row:o+2,column:c},x.advancing),a.push_cell({row:o+1,column:c+1},x.attacking),a.push_cell({row:o+1,column:c-1},x.attacking)),r.color===g.white&&(a.push_cell({row:o-1,column:c},x.advancing),l&&0!==a.length&&a.push_cell({row:o-2,column:c},x.advancing),a.push_cell({row:o-1,column:c+1},x.attacking),a.push_cell({row:o-1,column:c-1},x.attacking))}return r.piece===v.Knight&&(a.push_cell({row:o-2,column:c-1}),a.push_cell({row:o-2,column:c+1}),a.push_cell({row:o+2,column:c-1}),a.push_cell({row:o+2,column:c+1}),a.push_cell({row:o-1,column:c-2}),a.push_cell({row:o-1,column:c+2}),a.push_cell({row:o+1,column:c-2}),a.push_cell({row:o+1,column:c+2})),a}var R=function(n){Object(I.a)(e,n);var t=Object(F.a)(e);function e(n,o){var c;return Object(A.a)(this,e),(c=t.call(this)).gameState=void 0,c.blocked=void 0,c.color=void 0,c.gameState=n,c.blocked=!1,c.color=o,c}return Object(E.a)(e,[{key:"push_cell_to_axis",value:function(n){if(!this.notInBoard(n)&&!this.blocked){var t=this.gameState.boardState[n.row][n.column];t&&!t.empty&&(this.blocked=!0),this.push_cell(n)}}},{key:"push_cell",value:function(n,t){if(!this.notInBoard(n)){var e=this.gameState.boardState[n.row][n.column];(e.empty||e.color!==this.color)&&(e.empty||t!==x.advancing)&&(e.empty&&t===x.attacking||this.push(n))}}},{key:"notInBoard",value:function(n){return n.row<0||n.row>7||n.column<0||n.column>7}}]),e}(Object(B.a)(Array)),G=e(68),Q=e(41),T=new(function(){function n(t){Object(A.a)(this,n),this.soundElement=void 0,this.soundElement=document.createElement("audio"),this.soundElement.src=t,this.soundElement.setAttribute("preload","auto"),this.soundElement.setAttribute("controls","none"),this.soundElement.style.display="none",document.body.appendChild(this.soundElement)}return Object(E.a)(n,[{key:"play",value:function(){this.soundElement.play()}},{key:"stop",value:function(){this.soundElement.pause()}}]),n}())("../move.mp3");function q(){var n=Object(l.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 100%;\n"]);return q=function(){return n},n}function D(n){return Object(o.jsx)(M,{children:n.children})}var M=u.b.div(q());function N(){var n=Object(l.a)(["\n    position: absolute;\n    height: ",";\n    width: ",";\n    background-color: ",";\n    border-radius: 50%;\n    display: inline-block;\n"]);return N=function(){return n},n}function J(){var n=Object(l.a)(["\n    display: table-cell;\n    height: max(calc((100vh - 140px) / 8), 40px);\n    width: max(calc((100vh - 140px) / 8), 40px);\n    border: solid 1px;\n    cursor: pointer;\n    background-color: ",";\n"]);return J=function(){return n},n}function L(){var n=Object(l.a)(["\n    z-index: 1;\n    position: absolute;\n    transform: ",";\n"]);return L=function(){return n},n}var U=r.a.memo((function(n){var t=n.cell,e=n.coordinates,c=n.potentialMoves,r=n.setGameState,i=n.gameState,a=n.baseColor,l=n.playerColor,u=n.socket,s=i.activeCoordinates,h=Object(Q.isEqual)(s,e),b=void 0!==c.find((function(n){return Object(Q.isEqual)(n,e)}));return Object(o.jsx)(Y,{isActiveCell:h,baseColor:a,onClick:function(){if(!i.winner){var n=Object(G.a)({},i);if(n.activeCoordinates=e,(t.empty||h||t.color!==l)&&(n.activeCoordinates=void 0),s&&b){if(console.log("AAAAAAAAAAAA"),l!==i.turn)return n.activeCoordinates=void 0,void r(n);n.boardState[e.row][e.column]=n.boardState[s.row][s.column],n.boardState[s.row][s.column]={empty:!0},n.turn=i.turn===g.black?g.white:g.black,n.activeCoordinates=void 0,t.empty||t.piece!==v.King||(n.winner=l),u.current.emit("onUpdateGame",n),T.play()}r(n)}},children:Object(o.jsxs)(D,{children:[b?Object(o.jsx)(H,{empty:t.empty}):null,t.empty?null:Object(o.jsx)(W,{src:"../chess_icons/".concat(t.piece,"_").concat(t.color,".svg"),alt:"".concat(t.piece,"_").concat(t.color),color:l})]})})})),W=u.b.img(L(),(function(n){return n.color===g.black?"rotate(180deg)":"none"})),Y=u.b.div(J(),(function(n){return n.isActiveCell?n.theme.color.tertiary:n.baseColor===g.black?n.theme.color.primary:n.theme.color.secondary})),H=u.b.div(N(),(function(n){return n.empty?"25px":"50px"}),(function(n){return n.empty?"25px":"50px"}),(function(n){return n.theme.color.grey}));function V(){var n=Object(l.a)(["\n    font-family: ",";\n    width: 100%;\n    min-height: 50px;\n    position: relative;\n"]);return V=function(){return n},n}function X(){var n=Object(l.a)(["\n    position: absolute;\n    left: 50px;\n"]);return X=function(){return n},n}function Z(){var n=Object(l.a)(["\n    color: ",";\n    position: absolute;\n    left: 50px;\n    overflow: hidden;\n"]);return Z=function(){return n},n}function $(n){return Object(o.jsxs)(en,{children:[Object(o.jsx)(tn,{children:"Share this link with your opponent: "}),Object(o.jsx)("br",{}),Object(o.jsx)(nn,{children:"https://karim-portfolio-chess.herokuapp.com/game/".concat(n.gameId)})]})}var nn=u.b.div(Z(),(function(n){return n.theme.color.primary})),tn=u.b.div(X()),en=u.b.div(V(),(function(n){return n.theme.fontFamily}));function on(){var n=Object(l.a)(["\n    padding-left: 25px;\n    padding-bottom: 5px;\n"]);return on=function(){return n},n}function cn(){var n=Object(l.a)(["\n    position: absolute;\n    font-size: 20px;\n    right: 10%;\n    font-weight: bold;\n    display: flex;\n    align-items: center;\n    font-family: ",";\n"]);return cn=function(){return n},n}function rn(){var n=Object(l.a)(["\n    position: absolute;\n    font-size: 20px;\n    left: 10%;\n    font-weight: bold;\n    display: flex;\n    align-items: center;\n    font-family: ",";\n"]);return rn=function(){return n},n}function an(){var n=Object(l.a)(["\n    min-height: 50px;\n    width: 100%;\n    padding-top: 5px;\n"]);return an=function(){return n},n}function ln(n){return Object(o.jsxs)(un,{children:[Object(o.jsx)(sn,{turn:n.turn}),Object(o.jsx)(bn,{playerColor:n.playerColor})]})}var un=u.b.div(an());function sn(n){return Object(o.jsxs)(hn,{children:["Turn ",Object(o.jsx)(fn,{src:"../chess_icons/".concat(v.Pawn,"_").concat(n.turn,".svg"),alt:"turn"})]})}var hn=u.b.div(rn(),(function(n){return n.theme.fontFamily}));function bn(n){return Object(o.jsxs)(dn,{children:["You are"," ",Object(o.jsx)(fn,{alt:"color",src:"../chess_icons/".concat(v.Pawn,"_").concat(n.playerColor,".svg")})]})}var dn=u.b.div(cn(),(function(n){return n.theme.fontFamily})),fn=u.b.img(on());function pn(){var n=Object(l.a)(["\n    display: table-row;\n"]);return pn=function(){return n},n}function mn(){var n=Object(l.a)(["\n    overflow: hidden;\n    display: table;\n    table-layout: fixed;\n    border-spacing: 3px;\n    border-collapse: separate;\n    transform: ",";\n"]);return mn=function(){return n},n}function jn(){var n=Object(l.a)(["\n    display: flex;\n    flex-direction: column;\n    width: 100vw;\n    height: 100vh;\n"]);return jn=function(){return n},n}function wn(){var n=Object(l.a)(["\n    flex: 1;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n"]);return wn=function(){return n},n}function gn(){var n=Object(l.a)(["\n    height: 200px;\n    width: 200px;\n    animation: bubble 1s forwards;\n    animation-name: slides;\n    animation-duration: 2s;\n"]);return gn=function(){return n},n}function vn(){var n=Object(l.a)(["\n    position: absolute;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    font-size: 50px;\n    font-weight: bold;\n    z-index: 2;\n    font-family: ",";\n"]);return vn=function(){return n},n}function xn(n){var t=r.a.useState(n.gameState),e=Object(_.a)(t,2),c=e[0],i=e[1],a=r.a.useState([]),l=Object(_.a)(a,2),u=l[0],s=l[1],h=r.a.useRef(P()("/namespace/".concat(c.gameId))),b=g.white;return r.a.useEffect((function(){c.activeCoordinates?s(z(c,n.playerColor)):s([])}),[c,n.playerColor]),r.a.useEffect((function(){h.current.on("updateGame",(function(n){i(n)}))}),[]),Object(o.jsxs)(Cn,{children:[Object(o.jsx)(ln,{turn:c.turn,playerColor:n.playerColor}),Object(o.jsxs)(_n,{children:[c.winner?Object(o.jsx)(yn,{winner:c.winner}):null,Object(o.jsx)(Sn,{color:n.playerColor,children:c.boardState.map((function(t,e){return b=b===g.white?g.black:g.white,Object(o.jsx)(Pn,{children:t.map((function(t,r){return b=b===g.white?g.black:g.white,Object(o.jsx)(U,{cell:t,coordinates:{row:e,column:r},potentialMoves:u,playerColor:n.playerColor,gameState:c,setGameState:i,baseColor:b,socket:h},e.toString().concat(r.toString()))}))},e)}))})]}),Object(o.jsx)($,{gameId:c.gameId})]})}function yn(n){return Object(o.jsxs)(On,{children:[Object(o.jsx)(kn,{src:"../chess_icons/pawn_".concat(n.winner,".svg")}),"Winner"]})}var On=u.b.div(vn(),(function(n){return n.theme.fontFamily})),kn=u.b.img(gn()),_n=u.b.div(wn()),Cn=u.b.div(jn()),Sn=u.b.div(mn(),(function(n){return n.color===g.black?"rotate(180deg)":"none"})),Pn=u.b.div(pn());function An(){var n=Object(l.a)(["\n    font-size: 24px;\n    font-weight: bold;\n    color: ",";\n    font-family: ",";\n"]);return An=function(){return n},n}function En(){return Object(o.jsxs)(y,{children:[Object(o.jsx)(k,{src:"../chess_icons/chess_home.svg",alt:"home"}),Object(o.jsx)(In,{children:"Game Not Found"})]})}var In=u.b.span(An(),(function(n){return n.theme.color.primary}),(function(n){return n.theme.fontFamily}));function Fn(){var n=Object(h.g)().gameId,t=r.a.useState(),e=Object(_.a)(t,2),c=e[0],i=e[1],a=r.a.useState(!1),l=Object(_.a)(a,2),u=l[0],s=l[1],b=r.a.useState(g.white),d=Object(_.a)(b,2),f=d[0],p=d[1];return r.a.useEffect((function(){fetch("/get-game-state/".concat(n)).then((function(n){return 404===n.status&&s(!0),n.json()})).then((function(n){i(n)})).catch((function(){s(!0)}));var t=window.sessionStorage.getItem(n);t||(t=g.black,window.sessionStorage.setItem(n,"black")),p(t)}),[n]),u?Object(o.jsx)(En,{}):c?Object(o.jsx)(xn,{gameState:c,playerColor:f}):Object(o.jsx)(Bn,{})}function Bn(){return Object(o.jsx)("div",{className:"loader"})}function Kn(){var n=Object(l.a)(["\n    height: 100vh;\n    width: 100vw;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return Kn=function(){return n},n}var zn=u.b.div(Kn()),Rn={color:{primary:"#65A259",secondary:"#EBF4D2",tertiary:"#EDFF6B",grey:"#bbb"},fontFamily:"Courier New"},Gn=function(){return Object(o.jsx)(u.a,{theme:Rn,children:Object(o.jsx)(zn,{children:Object(o.jsx)(s.a,{children:Object(o.jsxs)(h.c,{children:[Object(o.jsx)(h.a,{path:"/game/:gameId",children:Object(o.jsx)(Fn,{})}),Object(o.jsx)(h.a,{path:"/",children:Object(o.jsx)(w,{})})]})})})})},Qn=function(n){n&&n instanceof Function&&e.e(3).then(e.bind(null,111)).then((function(t){var e=t.getCLS,o=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;e(n),o(n),c(n),r(n),i(n)}))};a.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(Gn,{})}),document.getElementById("root")),Qn()},74:function(n,t,e){}},[[110,1,2]]]);
//# sourceMappingURL=main.2493a7ab.chunk.js.map