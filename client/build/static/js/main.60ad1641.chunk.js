(this.webpackJsonpchess_client=this.webpackJsonpchess_client||[]).push([[0],{110:function(n,t,e){"use strict";e.r(t);var o=e(1),c=e(0),r=e.n(c),a=e(59),i=e.n(a),l=(e(74),e(3)),u=e(2),s=e(27),h=e(4),b=e(38),d=e.n(b),f=e(60);function p(){var n=Object(l.a)(["\n    height: 300px;\n    width: 300px;\n    animation: bubble 1s forwards;\n    animation-name: slides;\n    animation-duration: 2s;\n"]);return p=function(){return n},n}function m(){var n=Object(l.a)(["\n    width: 200px;\n    height: 50px;\n    background-color: ",";\n    color: white;\n    font-size: 18px;\n    font-weight: bold;\n    border: 1px solid black;\n    border-radius: 3px;\n    cursor: pointer;\n    font-family: ",";\n"]);return m=function(){return n},n}function w(){var n=Object(l.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: space-between;\n    height: 450px;\n"]);return w=function(){return n},n}function j(){var n=Object(h.f)(),t=r.a.useCallback(Object(f.a)(d.a.mark((function t(){var e,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/create-room",{method:"POST"});case 2:return e=t.sent,t.next=5,e.json();case 5:o=t.sent,n.push("/game/".concat(o.gameId)),window.sessionStorage.setItem(o.gameId,"white");case 8:case"end":return t.stop()}}),t)}))),[n]);return Object(o.jsxs)(y,{children:[Object(o.jsx)(k,{src:"../chess_icons/chess_home.svg",alt:"home"}),Object(o.jsx)(O,{onClick:t,children:"Create Game"})]})}var g,v,x,y=u.b.div(w()),O=u.b.button(m(),(function(n){return n.theme.color.primary}),(function(n){return n.theme.fontFamily})),k=u.b.img(p()),_=e(15);!function(n){n.white="white",n.black="black"}(g||(g={})),function(n){n.King="king",n.Rook="rook",n.Bishop="bishop",n.Queen="queen",n.Knight="knight",n.Pawn="pawn"}(v||(v={})),function(n){n[n.attacking=0]="attacking",n[n.advancing=1]="advancing"}(x||(x={}));var C=[{empty:!0},{empty:!0},{empty:!0},{empty:!0},{empty:!0},{empty:!0},{empty:!0},{empty:!0}],S=(v.Rook,g.black,v.Knight,g.black,v.Bishop,g.black,v.Queen,g.black,v.King,g.black,v.Bishop,g.black,v.Knight,g.black,v.Rook,g.black,v.Pawn,g.black,v.Pawn,g.black,v.Pawn,g.black,v.Pawn,g.black,v.Pawn,g.black,v.Pawn,g.black,v.Pawn,g.black,v.Pawn,g.black,[].concat(C),[].concat(C),[].concat(C),[].concat(C),v.Pawn,g.white,v.Pawn,g.white,v.Pawn,g.white,v.Pawn,g.white,v.Pawn,g.white,v.Pawn,g.white,v.Pawn,g.white,v.Pawn,g.white,v.Rook,g.white,v.Knight,g.white,v.Bishop,g.white,v.Queen,g.white,v.King,g.white,v.Bishop,g.white,v.Knight,g.white,v.Rook,g.white,g.white,e(64)),P=e.n(S),E=e(29),F=e(30),B=e(65),I=e(66),K=e(67),z=e(42);function R(n,t){if(!n.activeCoordinates)return[];var e=n.activeCoordinates,o=e.row,c=e.column,r=n.boardState[o][c];if(r.empty)return[];var a=function(n,t,e,o){for(var c=new A(e,o),r=new A(e,o),a=new A(e,o),i=new A(e,o),l=new A(e,o),u=new A(e,o),s=new A(e,o),h=new A(e,o),b=1;b<8;b++)c.push_cell_to_axis({row:n-b,column:t-b}),r.push_cell_to_axis({row:n-b,column:t+b}),a.push_cell_to_axis({row:n+b,column:t+b}),i.push_cell_to_axis({row:n+b,column:t-b}),l.push_cell_to_axis({row:n,column:t-b}),u.push_cell_to_axis({row:n-b,column:t}),s.push_cell_to_axis({row:n,column:t+b}),h.push_cell_to_axis({row:n+b,column:t});return{diagonal:Object(z.a)(c.concat(r).concat(i).concat(a)),orthogonal:Object(z.a)(l.concat(u).concat(s).concat(h)),diagonal_1:[c[0],r[0],i[0],a[0]],orthogonal_1:[l[0],u[0],s[0],h[0]]}}(o,c,n,t);if(r.piece===v.Queen)return a.diagonal.concat(a.orthogonal);if(r.piece===v.Bishop)return a.diagonal;if(r.piece===v.Rook)return a.orthogonal;if(r.piece===v.King)return a.diagonal_1.concat(a.orthogonal_1);var i=new A(n,t);if(r.piece===v.Pawn){var l=1===o||6===o;r.color===g.black&&(i.push_cell({row:o+1,column:c},x.advancing),l&&0!==i.length&&i.push_cell({row:o+2,column:c},x.advancing),i.push_cell({row:o+1,column:c+1},x.attacking),i.push_cell({row:o+1,column:c-1},x.attacking)),r.color===g.white&&(i.push_cell({row:o-1,column:c},x.advancing),l&&0!==i.length&&i.push_cell({row:o-2,column:c},x.advancing),i.push_cell({row:o-1,column:c+1},x.attacking),i.push_cell({row:o-1,column:c-1},x.attacking))}return r.piece===v.Knight&&(i.push_cell({row:o-2,column:c-1}),i.push_cell({row:o-2,column:c+1}),i.push_cell({row:o+2,column:c-1}),i.push_cell({row:o+2,column:c+1}),i.push_cell({row:o-1,column:c-2}),i.push_cell({row:o-1,column:c+2}),i.push_cell({row:o+1,column:c-2}),i.push_cell({row:o+1,column:c+2})),i}var A=function(n){Object(B.a)(e,n);var t=Object(I.a)(e);function e(n,o){var c;return Object(E.a)(this,e),(c=t.call(this)).gameState=void 0,c.blocked=void 0,c.color=void 0,c.gameState=n,c.blocked=!1,c.color=o,c}return Object(F.a)(e,[{key:"push_cell_to_axis",value:function(n){if(!this.notInBoard(n)&&!this.blocked){var t=this.gameState.boardState[n.row][n.column];t&&!t.empty&&(this.blocked=!0),this.push_cell(n)}}},{key:"push_cell",value:function(n,t){if(!this.notInBoard(n)){var e=this.gameState.boardState[n.row][n.column];(e.empty||e.color!==this.color)&&(e.empty||t!==x.advancing)&&(e.empty&&t===x.attacking||this.push(n))}}},{key:"notInBoard",value:function(n){return n.row<0||n.row>7||n.column<0||n.column>7}}]),e}(Object(K.a)(Array)),G=e(68),Q=e(41),T=new(function(){function n(t){Object(E.a)(this,n),this.soundElement=void 0,this.soundElement=document.createElement("audio"),this.soundElement.src=t,this.soundElement.setAttribute("preload","auto"),this.soundElement.setAttribute("controls","none"),this.soundElement.style.display="none",document.body.appendChild(this.soundElement)}return Object(F.a)(n,[{key:"play",value:function(){this.soundElement.play()}},{key:"stop",value:function(){this.soundElement.pause()}}]),n}())("../move.mp3");function q(){var n=Object(l.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 100%;\n"]);return q=function(){return n},n}function D(n){return Object(o.jsx)(M,{children:n.children})}var M=u.b.div(q());function N(){var n=Object(l.a)(["\n    position: absolute;\n    height: ",";\n    width: ",";\n    background-color: ",";\n    border-radius: 50%;\n    display: inline-block;\n"]);return N=function(){return n},n}function J(){var n=Object(l.a)(["\n    display: table-cell;\n    height: max(calc((100vh - 200px) / 8), 40px);\n    width: max(calc((100vh - 200px) / 8), 40px);\n    border: solid 1px;\n    cursor: pointer;\n    background-color: ",";\n"]);return J=function(){return n},n}function L(){var n=Object(l.a)(["\n    z-index: 1;\n    position: absolute;\n    transform: ",";\n"]);return L=function(){return n},n}var U=r.a.memo((function(n){var t=n.cell,e=n.coordinates,c=n.potentialMoves,r=n.setGameState,a=n.gameState,i=n.baseColor,l=n.playerColor,u=n.socket,s=a.activeCoordinates,h=Object(Q.isEqual)(s,e),b=void 0!==c.find((function(n){return Object(Q.isEqual)(n,e)}));return Object(o.jsx)(Y,{isActiveCell:h,baseColor:i,onClick:function(){if(!a.winner){var n=Object(G.a)({},a);if(n.activeCoordinates=e,(t.empty||h||t.color!==l)&&(n.activeCoordinates=void 0),s&&b){if(l!==a.turn)return n.activeCoordinates=void 0,void r(n);n.boardState[e.row][e.column]=n.boardState[s.row][s.column],n.boardState[s.row][s.column]={empty:!0},n.turn=a.turn===g.black?g.white:g.black,n.activeCoordinates=void 0,t.empty||t.piece!==v.King||(n.winner=l),u.current.emit("onUpdateGame",n),T.play()}r(n)}},children:Object(o.jsxs)(D,{children:[b?Object(o.jsx)(H,{empty:t.empty}):null,t.empty?null:Object(o.jsx)(W,{src:"../chess_icons/".concat(t.piece,"_").concat(t.color,".svg"),alt:"".concat(t.piece,"_").concat(t.color),color:l})]})})})),W=u.b.img(L(),(function(n){return n.color===g.black?"rotate(180deg)":"none"})),Y=u.b.div(J(),(function(n){return n.isActiveCell?n.theme.color.tertiary:n.baseColor===g.black?n.theme.color.primary:n.theme.color.secondary})),H=u.b.div(N(),(function(n){return n.empty?"25px":"50px"}),(function(n){return n.empty?"25px":"50px"}),(function(n){return n.theme.color.grey}));function V(){var n=Object(l.a)(["\n    padding-left: 25px;\n    padding-bottom: 5px;\n"]);return V=function(){return n},n}function X(){var n=Object(l.a)(["\n    position: absolute;\n    font-size: 20px;\n    right: 10%;\n    font-weight: bold;\n    display: flex;\n    align-items: center;\n    font-family: ",";\n"]);return X=function(){return n},n}function Z(){var n=Object(l.a)(["\n    position: absolute;\n    font-size: 20px;\n    left: 10%;\n    font-weight: bold;\n    display: flex;\n    align-items: center;\n    font-family: ",";\n"]);return Z=function(){return n},n}function $(){var n=Object(l.a)(["\n    min-height: 50px;\n    padding-top: 5px;\n    width: 100%;\n"]);return $=function(){return n},n}function nn(n){return Object(o.jsxs)(tn,{children:[Object(o.jsx)(en,{turn:n.turn}),Object(o.jsx)(cn,{playerColor:n.playerColor})]})}var tn=u.b.div($());function en(n){return Object(o.jsxs)(on,{children:["Turn ",Object(o.jsx)(an,{src:"../chess_icons/".concat(v.Pawn,"_").concat(n.turn,".svg"),alt:"turn"})]})}var on=u.b.div(Z(),(function(n){return n.theme.fontFamily}));function cn(n){return Object(o.jsxs)(rn,{children:["You are"," ",Object(o.jsx)(an,{alt:"color",src:"../chess_icons/".concat(v.Pawn,"_").concat(n.playerColor,".svg")})]})}var rn=u.b.div(X(),(function(n){return n.theme.fontFamily})),an=u.b.img(V());function ln(){var n=Object(l.a)(["\n    display: table-row;\n"]);return ln=function(){return n},n}function un(){var n=Object(l.a)(["\n    overflow: hidden;\n    display: table;\n    table-layout: fixed;\n    border-spacing: 3px;\n    border-collapse: separate;\n    transform: ",";\n"]);return un=function(){return n},n}function sn(){var n=Object(l.a)(["\n    display: flex;\n    flex-direction: column;\n    width: 100vw;\n    height: 100vh;\n"]);return sn=function(){return n},n}function hn(){var n=Object(l.a)(["\n    flex: 1;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n"]);return hn=function(){return n},n}function bn(){var n=Object(l.a)(["\n    height: 200px;\n    width: 200px;\n    animation: bubble 1s forwards;\n    animation-name: slides;\n    animation-duration: 2s;\n"]);return bn=function(){return n},n}function dn(){var n=Object(l.a)(["\n    position: absolute;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    font-size: 50px;\n    font-weight: bold;\n    z-index: 2;\n    font-family: ",";\n"]);return dn=function(){return n},n}function fn(n){var t=r.a.useState(n.gameState),e=Object(_.a)(t,2),c=e[0],a=e[1],i=r.a.useState([]),l=Object(_.a)(i,2),u=l[0],s=l[1],h=r.a.useRef(P()("/namespace/".concat(c.gameId))),b=g.white;return r.a.useEffect((function(){c.activeCoordinates?s(R(c,n.playerColor)):s([])}),[c,n.playerColor]),r.a.useEffect((function(){h.current.on("updateGame",(function(n){a(n)}))}),[]),Object(o.jsxs)(gn,{children:[Object(o.jsx)(nn,{turn:c.turn,playerColor:n.playerColor}),Object(o.jsxs)(jn,{children:[c.winner?Object(o.jsx)(pn,{winner:c.winner}):null,Object(o.jsx)(vn,{color:n.playerColor,children:c.boardState.map((function(t,e){return b=b===g.white?g.black:g.white,Object(o.jsx)(xn,{children:t.map((function(t,r){return b=b===g.white?g.black:g.white,Object(o.jsx)(U,{cell:t,coordinates:{row:e,column:r},potentialMoves:u,playerColor:n.playerColor,gameState:c,setGameState:a,baseColor:b,socket:h},e.toString().concat(r.toString()))}))},e)}))})]})]})}function pn(n){return Object(o.jsxs)(mn,{children:[Object(o.jsx)(wn,{src:"../chess_icons/pawn_".concat(n.winner,".svg")}),"Winner"]})}var mn=u.b.div(dn(),(function(n){return n.theme.fontFamily})),wn=u.b.img(bn()),jn=u.b.div(hn()),gn=u.b.div(sn()),vn=u.b.div(un(),(function(n){return n.color===g.black?"rotate(180deg)":"none"})),xn=u.b.div(ln());function yn(){var n=Object(l.a)(["\n    font-size: 24px;\n    font-weight: bold;\n    color: ",";\n    font-family: ",";\n"]);return yn=function(){return n},n}function On(){return Object(o.jsxs)(y,{children:[Object(o.jsx)(k,{src:"../chess_icons/chess_home.svg",alt:"home"}),Object(o.jsx)(kn,{children:"Game Not Found"})]})}var kn=u.b.span(yn(),(function(n){return n.theme.color.primary}),(function(n){return n.theme.fontFamily}));function _n(){var n=Object(h.g)().gameId,t=r.a.useState(),e=Object(_.a)(t,2),c=e[0],a=e[1],i=r.a.useState(!1),l=Object(_.a)(i,2),u=l[0],s=l[1],b=r.a.useState(g.white),d=Object(_.a)(b,2),f=d[0],p=d[1];return r.a.useEffect((function(){fetch("/get-game-state/".concat(n)).then((function(n){return 404===n.status&&s(!0),n.json()})).then((function(n){a(n)})).catch((function(){s(!0)}));var t=window.sessionStorage.getItem(n);t||(t=g.black,window.sessionStorage.setItem(n,"black")),p(t)}),[n]),u?Object(o.jsx)(On,{}):c?Object(o.jsx)(fn,{gameState:c,playerColor:f}):Object(o.jsx)(Cn,{})}function Cn(){return Object(o.jsx)("div",{className:"loader"})}function Sn(){var n=Object(l.a)(["\n    height: 100vh;\n    width: 100vw;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return Sn=function(){return n},n}var Pn=u.b.div(Sn()),En={color:{primary:"#65A259",secondary:"#EBF4D2",tertiary:"#EDFF6B",grey:"#bbb"},fontFamily:"Courier New"},Fn=function(){return Object(o.jsx)(u.a,{theme:En,children:Object(o.jsx)(Pn,{children:Object(o.jsx)(s.a,{children:Object(o.jsxs)(h.c,{children:[Object(o.jsx)(h.a,{path:"/game/:gameId",children:Object(o.jsx)(_n,{})}),Object(o.jsx)(h.a,{path:"/",children:Object(o.jsx)(j,{})})]})})})})},Bn=function(n){n&&n instanceof Function&&e.e(3).then(e.bind(null,111)).then((function(t){var e=t.getCLS,o=t.getFID,c=t.getFCP,r=t.getLCP,a=t.getTTFB;e(n),o(n),c(n),r(n),a(n)}))};i.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(Fn,{})}),document.getElementById("root")),Bn()},74:function(n,t,e){}},[[110,1,2]]]);
//# sourceMappingURL=main.60ad1641.chunk.js.map